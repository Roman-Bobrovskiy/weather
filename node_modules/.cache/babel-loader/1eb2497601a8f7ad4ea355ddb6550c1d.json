{"ast":null,"code":"import _objectSpread from\"/home/rb/React/weather/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/rb/React/weather/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{connect}from\"react-redux\";import actionsTypes from\"../../redux/weather/weatherActions\";import requests from\"../../utils/request\";import styles from\"./SearchForm.module.css\";import ModalWindow from\"../Modal/ModalWindow\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function SearchForm(_ref){var handleSubmit=_ref.handleSubmit,err=_ref.err,loading=_ref.loading;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];//get local stoeage data for cards\nuseEffect(function(){var localStorageData=JSON.parse(window.localStorage.getItem(\"city\"))||[];localStorageData.map(function(obj){return requests.getData(obj).then(function(elem){return handleSubmit(_objectSpread({},elem.data));}).catch(function(error){return err(true);}).finally(function(){return loading(false);});});},[handleSubmit,err,loading]);var handleChange=function handleChange(event){setText(event.target.value);};//add new cards\nvar onhandleSubmit=function onhandleSubmit(event){loading(true);event.preventDefault();requests.getData(text).then(function(elem){return handleSubmit(_objectSpread({},elem.data));}).catch(function(error){return err(true);}).finally(function(){return loading(false);});setText(\"\");};return/*#__PURE__*/ (// search\n_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ModalWindow,{}),/*#__PURE__*/_jsxs(\"form\",{className:styles.searchFrom,onSubmit:onhandleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{className:styles.searchInput,type:\"text\",value:text,onChange:handleChange,placeholder:\"Search city\"}),/*#__PURE__*/_jsx(\"button\",{className:styles.searchBtn,type:\"submit\",children:\"Search\"})]})]}));}var mapStateToProps=function mapStateToProps(state){return{state:state};};var mapDispatchToProps={handleSubmit:actionsTypes.getCityData,err:actionsTypes.error,loading:actionsTypes.loading};export default connect(mapStateToProps,mapDispatchToProps)(SearchForm);","map":{"version":3,"sources":["/home/rb/React/weather/src/components/SearchForm/SearchForm.js"],"names":["React","useState","useEffect","connect","actionsTypes","requests","styles","ModalWindow","SearchForm","handleSubmit","err","loading","text","setText","localStorageData","JSON","parse","window","localStorage","getItem","map","obj","getData","then","elem","data","catch","error","finally","handleChange","event","target","value","onhandleSubmit","preventDefault","searchFrom","searchInput","searchBtn","mapStateToProps","state","mapDispatchToProps","getCityData"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport actionsTypes from \"../../redux/weather/weatherActions\";\nimport requests from \"../../utils/request\";\nimport styles from \"./SearchForm.module.css\";\n\nimport ModalWindow from \"../Modal/ModalWindow\";\n\nfunction SearchForm({ handleSubmit, err, loading }) {\n  const [text, setText] = useState(\"\");\n\n  //get local stoeage data for cards\n  useEffect(() => {\n    let localStorageData =\n      JSON.parse(window.localStorage.getItem(\"city\")) || [];\n\n    localStorageData.map((obj) =>\n      requests\n        .getData(obj)\n        .then((elem) => handleSubmit({ ...elem.data }))\n        .catch((error) => err(true))\n        .finally(() => loading(false))\n    );\n  }, [handleSubmit, err, loading]);\n\n  let handleChange = (event) => {\n    setText(event.target.value);\n  };\n\n  //add new cards\n  let onhandleSubmit = (event) => {\n    loading(true);\n    event.preventDefault();\n    requests\n      .getData(text)\n      .then((elem) => handleSubmit({ ...elem.data }))\n      .catch((error) => err(true))\n      .finally(() => loading(false));\n\n    setText(\"\");\n  };\n\n  return (\n    // search\n    <>\n      <ModalWindow />\n      <form className={styles.searchFrom} onSubmit={onhandleSubmit}>\n        <input\n          className={styles.searchInput}\n          type=\"text\"\n          value={text}\n          onChange={handleChange}\n          placeholder=\"Search city\"\n        ></input>\n\n        <button className={styles.searchBtn} type=\"submit\">\n          Search\n        </button>\n      </form>\n    </>\n  );\n}\n\nlet mapStateToProps = (state) => {\n  return {\n    state,\n  };\n};\n\nlet mapDispatchToProps = {\n  handleSubmit: actionsTypes.getCityData,\n  err: actionsTypes.error,\n  loading: actionsTypes.loading,\n};\n\nSearchForm.propTypes = {\n  handleSubmit: PropTypes.func.isRequired,\n  err: PropTypes.func.isRequired,\n  loading: PropTypes.func.isRequired,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchForm);\n"]},"metadata":{},"sourceType":"module"}