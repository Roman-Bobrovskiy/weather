{"ast":null,"code":"import _objectSpread from\"/home/rb/React/weather/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/rb/React/weather/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{NavLink}from\"react-router-dom\";import{connect}from\"react-redux\";import actionsTypes from\"../../redux/weather/weatherActions\";import localStorage from\"../../utils/localStorage\";import\"bootstrap/dist/css/bootstrap.min.css\";import{Spinner}from\"react-bootstrap\";import Container from\"react-bootstrap/Container\";import Card from\"react-bootstrap/Card\";import Row from\"react-bootstrap/Row\";import Routes from\"../Routes\";import requests from\"../../utils/request\";import url from\"../../utils/path.json\";import timeCounter from\"../../utils/getTime\";import wind from\"../../utils/getWindDirection\";import{getTempInCelsius}from\"../../utils/getTempInCelsius\";import Arrow from\"../Arrow/Arrow\";import styles from\"./Card.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Cards(_ref){var state=_ref.state,handleUpdate=_ref.handleUpdate,handleRemove=_ref.handleRemove,err=_ref.err;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),check=_useState2[0],setСheck=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),update=_useState4[0],setUpdate=_useState4[1];//card update\nvar handleChangeUpdate=function handleChangeUpdate(city,event){setUpdate(true);event.preventDefault();setСheck(city);requests.getData(city).then(function(obj){return handleUpdate(_objectSpread({},obj.data));}).catch(function(error){return err(true);}).finally(function(){return setUpdate(false);});};//remove card\nvar handleChangeRemove=function handleChangeRemove(city,event){event.preventDefault();localStorage.remove(city);handleRemove(city);};return(//card body\nstate.weather.card.length!==0&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Container,{className:styles.cardContainer,children:/*#__PURE__*/_jsx(Row,{xs:1,sm:2,md:2,className:styles.row,children:state.weather.card.map(function(e){return/*#__PURE__*/_jsx(NavLink,{className:styles.navLink,to:{pathname:Routes.citypage,id:e.id,state:state},children:/*#__PURE__*/_jsx(Card,{className:styles.card,children:state.weather.loading&&state.weather.card?/*#__PURE__*/_jsx(Spinner,{animation:\"grow\",variant:\"info\"}):/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsxs(Card.Title,{className:styles.cityCountry,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.wrapBtn,children:[/*#__PURE__*/_jsx(\"button\",{className:styles.cardBtn,onClick:function onClick(event){return handleChangeUpdate(e.name,event);},children:update&&e.name===check?/*#__PURE__*/_jsx(Spinner,{as:\"span\",animation:\"border\",size:\"sm\",role:\"status\",\"aria-hidden\":\"true\"}):/*#__PURE__*/_jsxs(\"svg\",{width:\"20\",height:\"20\",fill:\"currentColor\",className:\"bi bi-arrow-clockwise\",viewBox:\"0 0 16 16\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z\"})]})}),/*#__PURE__*/_jsx(\"button\",{className:styles.cardBtn,onClick:function onClick(event){return handleChangeRemove(e.name,event);},children:/*#__PURE__*/_jsxs(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"20\",height:\"20\",fill:\"currentColor\",className:\"bi bi-x-circle\",viewBox:\"0 0 16 16\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\"})]})})]}),/*#__PURE__*/_jsxs(Card.Text,{className:styles.lustUpdate,children:[\"Last update \",timeCounter.timeLastUpdate(e.dt)]}),e.name,\", \",e.sys.country]}),/*#__PURE__*/_jsxs(Card.Text,{className:styles.temp,children:[/*#__PURE__*/_jsx(Card.Img,{variant:\"center\",src:url.imgUrl+e.weather[0].icon+\".png\",alt:e.weather[0].main}),getTempInCelsius(e.main.temp),\"\\xB0C\"]}),/*#__PURE__*/_jsxs(Card.Text,{className:styles.feelsLike,children:[\"Feels like \",getTempInCelsius(e.main.feels_like),\"\\xB0C \",e.weather[0].main]}),/*#__PURE__*/_jsxs(\"ul\",{className:styles.wrapInfoData,children:[/*#__PURE__*/_jsxs(\"li\",{className:styles.infoData,children:[wind.speed(e.wind.speed),\" m/s\",\" \",/*#__PURE__*/_jsx(Arrow,{deg:e.wind.deg}),wind.direction(e.wind.deg)]}),/*#__PURE__*/_jsxs(\"li\",{className:styles.infoData,children:[\"Umidity: \",e.main.humidity,\"%\"]}),/*#__PURE__*/_jsxs(\"li\",{className:styles.infoData,children:[\"Pressure: \",e.main.pressure,\"hPa\"]}),/*#__PURE__*/_jsxs(\"li\",{className:styles.infoData,children:[\"Visibility: \",e.visibility/1000,\"km\"]}),/*#__PURE__*/_jsxs(\"li\",{className:styles.infoDataSun,children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"20\",height:\"20\",fill:\"currentColor\",viewBox:\"0 0 28.17 28.17\",margin:\"0\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M14 20.01c-3.18 0-5.77-2.59-5.77-5.77S10.82 8.47 14 8.47s5.77 2.59 5.77 5.77-2.59 5.77-5.77 5.77zm0-10.47c-2.59 0-4.69 2.1-4.69 4.69s2.1 4.69 4.69 4.69 4.69-2.1 4.69-4.69S16.58 9.54 14 9.54zm7.46 12.93c-.19 0-.38-.07-.53-.22l-1.89-1.89c-.29-.29-.29-.77 0-1.05.14-.14.33-.22.53-.22s.39.08.53.22l1.89 1.89c.29.29.29.77 0 1.05-.14.15-.33.22-.53.22zm-14.95-.01c-.19 0-.38-.07-.53-.22-.29-.29-.29-.77 0-1.05l1.89-1.89c.3-.29.75-.29 1.05-.01.15.15.22.34.22.54s-.07.39-.22.53l-1.89 1.89c-.13.14-.32.21-.52.21zm18.07-7.42h-2.67c-.41 0-.75-.34-.75-.75s.34-.75.75-.75h2.68c.4 0 .72.31.74.7v.04c-.03.45-.36.76-.75.76zm-18.5 0H3.41c-.41 0-.75-.34-.75-.75s.34-.75.75-.75h2.68c.4 0 .72.31.74.7v.04c-.01.45-.34.76-.75.76zM8.4 9.39c-.19 0-.38-.07-.53-.22L5.98 7.28c-.29-.29-.29-.77 0-1.05.28-.28.77-.28 1.05 0l1.89 1.89c.29.29.29.77 0 1.05-.14.15-.33.22-.52.22zm11.19 0c-.19 0-.38-.07-.53-.22-.14-.14-.22-.33-.22-.53s.08-.39.22-.53l1.89-1.89c.3-.29.75-.29 1.05-.01.3.3.3.77.01 1.06l-1.89 1.89c-.15.16-.35.23-.53.23zM14 7.09h-.04c-.21-.01-.39-.1-.53-.25-.13-.15-.2-.34-.19-.54V3.67c0-.41.34-.75.75-.75s.75.34.75.75v2.66c.01.2-.07.39-.21.54-.15.13-.33.22-.53.22zm0 18.48h-.04c-.21-.01-.39-.1-.53-.25-.13-.15-.2-.34-.19-.54v-2.63c0-.41.34-.75.75-.75s.75.34.75.75v2.66c.01.2-.07.39-.21.54-.15.14-.33.22-.53.22z\"})}),/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"16\",height:\"16\",fill:\"currentColor\",className:\"bi bi-arrow-up\",viewBox:\"0 0 16 16\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5z\"})}),timeCounter.time(e.sys.sunrise),\" \",/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"16\",height:\"16\",fill:\"currentColor\",className:\"bi bi-arrow-up\",viewBox:\"0 0 16 16\",transform:\"rotate(180)\",margin:\"0\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5z\"})}),timeCounter.time(e.sys.sunset)]})]})]})},e.id)},e.id);})})})}));}var mapStateToProps=function mapStateToProps(state){return{state:state};};var mapDispatchToProps={handleUpdate:actionsTypes.updWeather,handleRemove:actionsTypes.removeCityData,err:actionsTypes.error,loading:actionsTypes.loading};export default connect(mapStateToProps,mapDispatchToProps)(Cards);","map":{"version":3,"sources":["/home/rb/React/weather/src/components/Card/Card.js"],"names":["React","useState","NavLink","connect","actionsTypes","localStorage","Spinner","Container","Card","Row","Routes","requests","url","timeCounter","wind","getTempInCelsius","Arrow","styles","Cards","state","handleUpdate","handleRemove","err","check","setСheck","update","setUpdate","handleChangeUpdate","city","event","preventDefault","getData","then","obj","data","catch","error","finally","handleChangeRemove","remove","weather","card","length","cardContainer","row","map","e","navLink","pathname","citypage","id","loading","cityCountry","wrapBtn","cardBtn","name","lustUpdate","timeLastUpdate","dt","sys","country","temp","imgUrl","icon","main","feelsLike","feels_like","wrapInfoData","infoData","speed","deg","direction","humidity","pressure","visibility","infoDataSun","time","sunrise","sunset","mapStateToProps","mapDispatchToProps","updWeather","removeCityData"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { NavLink } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport actionsTypes from \"../../redux/weather/weatherActions\";\nimport localStorage from \"../../utils/localStorage\";\n\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { Spinner } from \"react-bootstrap\";\nimport Container from \"react-bootstrap/Container\";\nimport Card from \"react-bootstrap/Card\";\nimport Row from \"react-bootstrap/Row\";\n\nimport Routes from \"../Routes\";\nimport requests from \"../../utils/request\";\nimport url from \"../../utils/path.json\";\nimport timeCounter from \"../../utils/getTime\";\nimport wind from \"../../utils/getWindDirection\";\nimport { getTempInCelsius } from \"../../utils/getTempInCelsius\";\nimport Arrow from \"../Arrow/Arrow\";\nimport styles from \"./Card.module.css\";\n\nfunction Cards({ state, handleUpdate, handleRemove, err }) {\n  const [check, setСheck] = useState(\"\");\n  const [update, setUpdate] = useState(false);\n\n  //card update\n  let handleChangeUpdate = (city, event) => {\n    setUpdate(true);\n    event.preventDefault();\n    setСheck(city);\n    requests\n      .getData(city)\n      .then((obj) => handleUpdate({ ...obj.data }))\n      .catch((error) => err(true))\n      .finally(() => setUpdate(false));\n  };\n  //remove card\n  let handleChangeRemove = (city, event) => {\n    event.preventDefault();\n    localStorage.remove(city);\n    handleRemove(city);\n  };\n\n  return (\n    //card body\n    state.weather.card.length !== 0 && (\n      <>\n        <Container className={styles.cardContainer}>\n          <Row xs={1} sm={2} md={2} className={styles.row}>\n            {state.weather.card.map((e) => (\n              <NavLink\n                key={e.id}\n                className={styles.navLink}\n                to={{\n                  pathname: Routes.citypage,\n                  id: e.id,\n                  state: state,\n                }}\n              >\n                <Card className={styles.card} key={e.id}>\n                  {state.weather.loading && state.weather.card ? (\n                    <Spinner animation=\"grow\" variant=\"info\" />\n                  ) : (\n                    <Card.Body>\n                      <Card.Title className={styles.cityCountry}>\n                        <div className={styles.wrapBtn}>\n                          <button\n                            className={styles.cardBtn}\n                            onClick={(event) =>\n                              handleChangeUpdate(e.name, event)\n                            }\n                          >\n                            {update && e.name === check ? (\n                              <Spinner\n                                as=\"span\"\n                                animation=\"border\"\n                                size=\"sm\"\n                                role=\"status\"\n                                aria-hidden=\"true\"\n                              />\n                            ) : (\n                              <svg\n                                width=\"20\"\n                                height=\"20\"\n                                fill=\"currentColor\"\n                                className=\"bi bi-arrow-clockwise\"\n                                viewBox=\"0 0 16 16\"\n                              >\n                                <path d=\"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z\" />\n                                <path d=\"M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z\" />\n                              </svg>\n                            )}\n                          </button>\n                          <button\n                            className={styles.cardBtn}\n                            onClick={(event) =>\n                              handleChangeRemove(e.name, event)\n                            }\n                          >\n                            <svg\n                              xmlns=\"http://www.w3.org/2000/svg\"\n                              width=\"20\"\n                              height=\"20\"\n                              fill=\"currentColor\"\n                              className=\"bi bi-x-circle\"\n                              viewBox=\"0 0 16 16\"\n                            >\n                              <path d=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\" />\n                              <path d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\" />\n                            </svg>\n                          </button>\n                        </div>\n                        <Card.Text className={styles.lustUpdate}>\n                          Last update {timeCounter.timeLastUpdate(e.dt)}\n                        </Card.Text>\n                        {e.name}, {e.sys.country}\n                      </Card.Title>\n                      <Card.Text className={styles.temp}>\n                        <Card.Img\n                          variant=\"center\"\n                          src={url.imgUrl + e.weather[0].icon + \".png\"}\n                          alt={e.weather[0].main}\n                        />\n                        {getTempInCelsius(e.main.temp)}°C\n                      </Card.Text>\n                      <Card.Text className={styles.feelsLike}>\n                        Feels like {getTempInCelsius(e.main.feels_like)}\n                        °C {e.weather[0].main}\n                      </Card.Text>\n                      <ul className={styles.wrapInfoData}>\n                        <li className={styles.infoData}>\n                          {wind.speed(e.wind.speed)} m/s{\" \"}\n                          <Arrow deg={e.wind.deg} />\n                          {wind.direction(e.wind.deg)}\n                        </li>\n                        <li className={styles.infoData}>\n                          Umidity: {e.main.humidity}%\n                        </li>\n                        <li className={styles.infoData}>\n                          Pressure: {e.main.pressure}hPa\n                        </li>\n                        <li className={styles.infoData}>\n                          Visibility: {e.visibility / 1000}km\n                        </li>\n                        <li className={styles.infoDataSun}>\n                          <svg\n                            xmlns=\"http://www.w3.org/2000/svg\"\n                            width=\"20\"\n                            height=\"20\"\n                            fill=\"currentColor\"\n                            viewBox=\"0 0 28.17 28.17\"\n                            margin=\"0\"\n                          >\n                            <path d=\"M14 20.01c-3.18 0-5.77-2.59-5.77-5.77S10.82 8.47 14 8.47s5.77 2.59 5.77 5.77-2.59 5.77-5.77 5.77zm0-10.47c-2.59 0-4.69 2.1-4.69 4.69s2.1 4.69 4.69 4.69 4.69-2.1 4.69-4.69S16.58 9.54 14 9.54zm7.46 12.93c-.19 0-.38-.07-.53-.22l-1.89-1.89c-.29-.29-.29-.77 0-1.05.14-.14.33-.22.53-.22s.39.08.53.22l1.89 1.89c.29.29.29.77 0 1.05-.14.15-.33.22-.53.22zm-14.95-.01c-.19 0-.38-.07-.53-.22-.29-.29-.29-.77 0-1.05l1.89-1.89c.3-.29.75-.29 1.05-.01.15.15.22.34.22.54s-.07.39-.22.53l-1.89 1.89c-.13.14-.32.21-.52.21zm18.07-7.42h-2.67c-.41 0-.75-.34-.75-.75s.34-.75.75-.75h2.68c.4 0 .72.31.74.7v.04c-.03.45-.36.76-.75.76zm-18.5 0H3.41c-.41 0-.75-.34-.75-.75s.34-.75.75-.75h2.68c.4 0 .72.31.74.7v.04c-.01.45-.34.76-.75.76zM8.4 9.39c-.19 0-.38-.07-.53-.22L5.98 7.28c-.29-.29-.29-.77 0-1.05.28-.28.77-.28 1.05 0l1.89 1.89c.29.29.29.77 0 1.05-.14.15-.33.22-.52.22zm11.19 0c-.19 0-.38-.07-.53-.22-.14-.14-.22-.33-.22-.53s.08-.39.22-.53l1.89-1.89c.3-.29.75-.29 1.05-.01.3.3.3.77.01 1.06l-1.89 1.89c-.15.16-.35.23-.53.23zM14 7.09h-.04c-.21-.01-.39-.1-.53-.25-.13-.15-.2-.34-.19-.54V3.67c0-.41.34-.75.75-.75s.75.34.75.75v2.66c.01.2-.07.39-.21.54-.15.13-.33.22-.53.22zm0 18.48h-.04c-.21-.01-.39-.1-.53-.25-.13-.15-.2-.34-.19-.54v-2.63c0-.41.34-.75.75-.75s.75.34.75.75v2.66c.01.2-.07.39-.21.54-.15.14-.33.22-.53.22z\" />\n                          </svg>\n                          <svg\n                            xmlns=\"http://www.w3.org/2000/svg\"\n                            width=\"16\"\n                            height=\"16\"\n                            fill=\"currentColor\"\n                            className=\"bi bi-arrow-up\"\n                            viewBox=\"0 0 16 16\"\n                          >\n                            <path d=\"M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5z\" />\n                          </svg>\n                          {timeCounter.time(e.sys.sunrise)}{\" \"}\n                          <svg\n                            xmlns=\"http://www.w3.org/2000/svg\"\n                            width=\"16\"\n                            height=\"16\"\n                            fill=\"currentColor\"\n                            className=\"bi bi-arrow-up\"\n                            viewBox=\"0 0 16 16\"\n                            transform=\"rotate(180)\"\n                            margin=\"0\"\n                          >\n                            <path d=\"M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5z\" />\n                          </svg>\n                          {timeCounter.time(e.sys.sunset)}\n                        </li>\n                      </ul>\n                    </Card.Body>\n                  )}\n                </Card>\n              </NavLink>\n            ))}\n          </Row>\n        </Container>\n      </>\n    )\n  );\n}\n\nlet mapStateToProps = (state) => {\n  return {\n    state,\n  };\n};\n\nlet mapDispatchToProps = {\n  handleUpdate: actionsTypes.updWeather,\n  handleRemove: actionsTypes.removeCityData,\n  err: actionsTypes.error,\n  loading: actionsTypes.loading,\n};\n\nCards.propTypes = {\n  state: PropTypes.object.isRequired,\n  handleUpdate: PropTypes.func.isRequired,\n  handleRemove: PropTypes.func.isRequired,\n  err: PropTypes.func.isRequired,\n  city: PropTypes.string,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Cards);\n"]},"metadata":{},"sourceType":"module"}